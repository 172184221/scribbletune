#!/usr/bin/env node

"use strict";

var path = require('path');
var fs = require('fs');
var lib = path.join(path.dirname(fs.realpathSync(__filename)), '../lib');

var scribbletune = require(lib + '/scribbletune.js');

//get the commandline arguments
var argv = require('minimist')(process.argv.slice(2));

//setup defaults
var _root = argv.root || 'c3';
var _mode = argv.mode || argv.scale || 'ionian';
var _pattern = argv.pattern || 'x-x-x-x-x-x-x-x-';


//create a clip
var clip = 
	scribbletune.generate.clip({
		notes: argv.notes || scribbletune.mode.get(_root, _mode), 
		pattern: _pattern
	});

scribbletune.midi.writeToFile(clip);